<!DOCTYPE html><html><head><meta charset="utf-8"><title>第一讲：Marriage Market 婚姻市场 | 【盗泉】</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="匹配理论(Matching Theory)讨论了许多非常生活化的经济学，让你充分意识到，经济学本质上解决的是稀缺资源如何分配的问题，而不仅仅是GDP、收入、消费等等这些一听就像要钻进“钱”眼里的名词。在本讲中，我们首先介绍婚姻市场（也可以叫恋爱市场）中的匹配模型，参考书目是Roth &amp; Sotomayor(1992)“TWO-SIDEDMATCHING:A GAME-THEORETIC M"><meta property="og:type" content="article"><meta property="og:title" content="第一讲：Marriage Market 婚姻市场"><meta property="og:url" content="http://sx349.github.io/2015/05/19/ECON01/index.html"><meta property="og:site_name" content="【盗泉】"><meta property="og:description" content="匹配理论(Matching Theory)讨论了许多非常生活化的经济学，让你充分意识到，经济学本质上解决的是稀缺资源如何分配的问题，而不仅仅是GDP、收入、消费等等这些一听就像要钻进“钱”眼里的名词。在本讲中，我们首先介绍婚姻市场（也可以叫恋爱市场）中的匹配模型，参考书目是Roth &amp; Sotomayor(1992)“TWO-SIDEDMATCHING:A GAME-THEORETIC M"><meta property="article:published_time" content="2015-05-19T07:00:00.000Z"><meta property="article:modified_time" content="2020-06-07T05:05:07.142Z"><meta property="article:author" content="sx349"><meta property="article:tag" content="婚姻"><meta property="article:tag" content="匹配理论"><meta property="article:tag" content="恋爱"><meta property="article:tag" content="理论经济学"><meta name="twitter:card" content="summary"><link rel="icon" href="/favicon.png"><link href="https://fonts.googleapis.com/css?family=Lato:400,400i,700" rel="stylesheet"><link rel="stylesheet" href="/icomoon/style.css"><link rel="stylesheet" href="/style.css"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="【盗泉】" type="application/atom+xml"></head><body><div class="site-wrapper"><div id="loading-bar-wrapper"><div id="loading-bar"></div></div><script>document.getElementById("loading-bar").style.width="20%"</script><header id="header" class="site-header clearfix"><a class="logo square clearfix" href="/"><span class="b">【 </span><span class="b">盗 </span><span class="b">泉 </span><span class="b">】 </span></a><a class="me square site-nav-switch clearfix"><span class="b"><span class="icon icon-menu"></span></span></a></header><script>document.getElementById("loading-bar").style.width="40%"</script><main id="main" class="clearfix"><article id="post-ECON01" class="article white-box article-type-post" itemscope itemprop="blogPost"><header class="article-header"><h1 class="article-title" itemprop="name">第一讲：Marriage Market 婚姻市场</h1><div class="article-meta">Posted on <time class="article-time" datetime="2015-05-19T07:00:00.000Z" itemprop="datePublished">May 19, 2015</time></div><div class="article-meta">Category: <a class="category-link" href="/categories/%E7%BB%8F%E6%B5%8E/">经济</a><div class="article-tags"><a class="tag-link" href="/tags/%E5%8C%B9%E9%85%8D%E7%90%86%E8%AE%BA/" rel="tag">匹配理论</a><a class="tag-link" href="/tags/%E5%A9%9A%E5%A7%BB/" rel="tag">婚姻</a><a class="tag-link" href="/tags/%E6%81%8B%E7%88%B1/" rel="tag">恋爱</a><a class="tag-link" href="/tags/%E7%90%86%E8%AE%BA%E7%BB%8F%E6%B5%8E%E5%AD%A6/" rel="tag">理论经济学</a></div></div></header><div class="article-entry" itemprop="articleBody"><p>匹配理论(Matching Theory)讨论了许多非常生活化的经济学，让你充分意识到，经济学本质上解决的是稀缺资源如何分配的问题，而不仅仅是GDP、收入、消费等等这些一听就像要钻进“钱”眼里的名词。在本讲中，我们首先介绍婚姻市场（也可以叫恋爱市场）中的匹配模型，参考书目是Roth &amp; Sotomayor(1992)“TWO-SIDEDMATCHING:A GAME-THEORETIC MODEL AND ANALYSIS”。</p><a id="more"></a><hr><h1 id="婚姻市场"><a href="#婚姻市场" class="headerlink" title="婚姻市场"></a>婚姻市场</h1><p>首先，婚姻市场是一个双边市场，分为男生和女生。由对称性，以下的讨论我们都站在男生的视角，但同样的结论对于女生也是成立的。</p><p>每个男生对于所有女生有一个偏好（就是对女生有一个排序），反之女生对于所有男生也有一个偏好。不过，在男生的偏好中，除了所有女生之外，还包括他自己；所有排在自己之后的女生都被视为unacceptable（换句话说，宁愿单身也不愿意接受这些女生），反之女生也是如此。</p><p>为了方便起见，我们一般默认偏好是严格(strict)的，也就是说，对于任何两个女生，男生总是喜欢一个胜过另一个，不会出现觉得两个女生一样好(indifference)的情况。这个要求对于我们后面介绍的Deferred Acceptance算法其实没有影响，但是对于其它一些重要结论则是必要的条件。</p><hr><h1 id="匹配"><a href="#匹配" class="headerlink" title="匹配"></a>匹配</h1><p>一个匹配(matching)，就是将婚姻市场上的一部分男生和女生配对，然后让剩下的男生和女生保持单身，我们用函数μ(·)来表示这个匹配，μ(x)就是x的配偶。μ(x)满足以下三条要求：1. 男人的配偶不是自己（单身）就是女人；<br>2. 女人的配偶不是自己（单身）就是男人；<br>3. 每个人的配偶的配偶都是本身。（不考虑同性恋和一夫多妻/一妻多夫）</p><p>但是，匹配有很多种，比如说每个人都保持单身，这也是一个可行的匹配，但是这样的匹配几乎是不可能维持的（因为单身狗也有春天……）。那些可以维持的匹配，一定存在一些特殊的特点，我们把这些匹配称为稳定匹配(stable matching)。具体来说，稳定匹配指的是满足以下两个要求的匹配：</p><ol><li>Individual Rationality（简称IR，大致可以翻译为“个体理性”），每个人不会接受unacceptable的配偶。</li><li>Pairwise Stability（大致可以翻译为“配对稳定”），不会同时有一男一女喜欢对方胜过自己的配偶。（如果有的话，我们称这一男一女为blocking pair，他们阻碍(block)了这个匹配μ）</li></ol><p>一般来说，第一条是很容易满足的，比如说每个人都保持单身，就是满足IR的匹配。但是第二条就不一定了，而且在现实世界中很有可能就发生这样的事（NTR）了。那么问题来了，挖掘机技术到底哪家强？啊不对，怎么找到稳定匹配呢？</p><p>在进入下一部分之前，首先来解释一下稳定匹配的意义，或者说，为什么我们要找出稳定匹配。实际上，对于寻找稳定匹配的过程，存在两种不同的解释，或者说就是两种不同的市场：其一称为”Decentralized Market”，就是把一堆男生女生扔进市场，然后他们就开始不断地追人甩人，最后他们达到了某种稳定的状态，这种状态就是稳定匹配；其二称为”Centralized Market”，就是现在开了一家T大婚姻介绍所，所有T大的单身狗把自己的信息提交过去，然后男生给女生排个序，女生给男生排个序，然后T大婚介所根据双方的偏好信息，排好一套匹配，然后告诉男生“你命中注定的女神就是XXX”，告诉女生“你命中注定的男神就是XXX”，如果双方皆大欢喜，不存在NTR的可能，那么也是稳定匹配。下面介绍的Deferred Acceptance算法，看起来好像是按照前一种市场进行的，但实际上我们可以假定已经收集到了所有的男女生信息，然后让计算机模拟一下流程，得到了最终的稳定匹配，然后咱们的婚介所就可以关张了（当这个问题是静态时，这样的婚介所开一次就可以关门了……）。</p><hr><h1 id="寻找稳定匹配"><a href="#寻找稳定匹配" class="headerlink" title="寻找稳定匹配"></a>寻找稳定匹配</h1><p>知乎上有一句经典名言：不问有没有就问为什么都是耍流氓（以及其它变种……）所以在找稳定匹配之前，一定先要问一句有没有。如果有同学表示这他喵的不是显然的么，那就让我们（等会儿）用一个实际例子来糊他一脸~</p><p>实际上，婚姻市场这样一个双边市场是非常特别的，它有这样两个性质：</p><ol><li>它把所有市场中的人分成了两边，互相进行选择；</li><li>它是一对一的；</li></ol><p>这两个性质为什么特殊呢？因为如果不符合，那就可能没有稳定匹配；具体来说，如果市场上只有一类人（室友选择问题），或者有三类人（家庭配对，有父亲、母亲和孩子）或者市场上是一对多的（劳动力市场，一个公司招好几个工人，而且工人之间有协同效应），都能够找到反例。比如以下这个例子来自Gale &amp; Shapley，是室友选择问题提供的一个不存在稳定匹配的反例。</p><p>有4个同学a,b,c,d分在两个寝室，每个寝室有两个人，每个同学对另外三个人各自有一个偏好（当然，这时候就不允许保持“单身”啦）。</p><ul><li>P(a)=b,c,d（a最希望和b分在一个寝室，然后是c，最差是d，以下同理）</li><li>P(b)=c,a,d</li><li>P(c)=a,b,d</li><li>P(d)=arbitrary（d同学显然是最不受欢迎的室友= =）</li></ul><p>4个人分在两个寝室，一共就只有三种分法</p><ul><li>μ1={(a b)(c d)} 不行，因为b和c希望和对方住一块儿均胜过自己的室友；</li><li>μ2={(a c)(b d)} 也不行，这回闹别扭的是a和b；</li><li>μ3={(a d)(b c)} 还是不行，这回闹别扭的是c和a；</li></ul><p>于是这个室友选择问题就没有稳定匹配了。<br>那双边市场有没有稳定匹配呢？有。为什么呢？我们往下看。</p><p>假定我们先接受了这一事实，然后开始尝试找稳定匹配。一个比较直接的想法是，首先大家自由配对，选择自己能够接受的配偶，比如说先让所有人单身（避免了Individual Rationality的问题），这时候的匹配基本上不可能是稳定的，不满足Pairwise Stability嘛。那好，我们在所有阻碍了这个匹配的男女（还记得阻碍(block)的定义吗？不记得的向上翻）中，找一对出来，让他们俩成了，然后让他们原本的配偶（如果有的话）变成单身，就得到一个新的匹配，比原来那个稍微稳定了一点吧？然后就不断重复这个过程就行啦~</p><p>所以这个想法对吗？也不对也对。说不对，是因为Knuth找到了这样一个例子，如果选择这对（狗）男女选得特别不巧的话，还真有可能进入一个死循环。说对，是因为Roth 和 Vande Vate 给出了一个定理说，对任何一个匹配来说，一般不会只有一对男女阻碍了这个匹配成为稳定匹配，如果我在所有的匹配中随机地选一对，把他们解决掉，然后在新的匹配中随机地选一堆，然后解决掉，不断重复下去，只要每种选择的概率都是正的（都有可能被选上），那么最终这个过程以概率1达到一个稳定匹配，这篇论文“Random Paths to Stability”(Roth &amp; Vande Vate, 1990)短小精悍，证明也很巧妙，不妨一读。</p><p>但是，这种办法实在太折腾了，而且听起来太靠运气了，有没有不那么麻烦的算法呢？那就是Gale &amp; Shapley在1962年提出的著名的Deferred Acceptance Algorithm，简称DA算法，翻译过来叫作延迟接受算法，简单地说，就是（假定男生主动求婚）允许一个女生在接受某个男生之后，如果碰到更心仪的男生可以把前一个给甩了。</p><p>接下来就是揭露真相的时刻啦，为什么我们说双边市场有稳定匹配呢？因为Gale 和 Shapley 说，只要按照我们这个DA算法走一遍，得到的一定是稳定匹配，所以稳定匹配就一定存在。换句话说，他们就是通过用DA算法构造出一个稳定匹配，证明了双边市场上稳定匹配的存在性。</p><p>然后我们来看一看这个具体的流程（假定男生主动求婚）；</p><ul><li>第一轮，每个男生向自己的偏好中排名最高的女生求婚；每个女生拒绝掉所有unacceptable的求婚者，然后在剩下的求婚者中，选择在自己的偏好中排名最高的男生，然后和他订婚(keep engaged)，并且拒绝掉其他人。</li><li>之后的每一轮，每个还没有名草有主的男生，向自己的偏好中排名最高的没有拒绝过自己的女生求婚；每个女生仍然是拒绝掉所有unacceptable的求婚者，然后在剩下的求婚者以及上一轮订婚的那个男生中，选择在自己的偏好中排名最高的男生，和他订婚（渣女！哼！），并且拒绝掉其他人。</li><li>依此类推，每一轮那些没有被接受的男生都会向下一顺位的女生求婚，直到被订婚或者所有acceptable的女生都拒绝了他。</li><li>如果没有男生求婚了，算法结束（这个过程可以保证是有限的），此时所有已经订婚了的男生和女生结婚，剩下的人保持单身。</li></ul><p>可以证明，这个时候给出的匹配一定是稳定的。否则假定男生m和女生w打算私奔，那么m一定喜欢w胜过目前的配偶μ(m)，根据算法的流程，m一定在和μ(m)配对前向w求过婚并被拒绝了，那这意味着w遇到了一个比m更好的男生m’，而w目前的配偶μ(w)至少和m’一样好，所以μ(w)比m更好，那么女生w就不应该愿意和男生m私奔，矛盾。</p><hr><h1 id="稳定匹配的好坏"><a href="#稳定匹配的好坏" class="headerlink" title="稳定匹配的好坏"></a>稳定匹配的好坏</h1><p>实际上，稳定匹配自然不是只有DA算法给出的这一个（或者说两个，男生主动和女生主动各自得到一个可能不同的稳定匹配），那么这些稳定匹配各自是有好有坏的。Gale 和 Shapley进一步证明，如果偏好是严格(strict)的，那么由男生主动求婚得到的这个稳定匹配对男生来说是最好的，称之为M-optimal；反之，由女生主动求婚得到的稳定匹配就是W-optimal的。</p><p>让我们先往前回一点，先定义一下对于双方来说什么是好的匹配，什么是不好的匹配。我们用”&gt;m”（m应该是下标）来表示对男生来说的“优于”，假设我们现在有两个匹配μ和ν，μ &gt;m ν的意思就是每个男生在μ中的配偶至少和ν中一样好，且至少有一个男生在μ中的配偶比ν要好；相对应的，女生也有这样的一个比较关系“&gt;w”。（不是”&gt;w&lt;”谢谢）</p><p>牛逼轰轰的Knuth又一次站了出来，他告诉我们，如果两个稳定匹配μ和ν满足 μ &gt;m ν，那么一定有ν &gt;w μ。也就是说，男生认为更好的配对，女生一定认为更不好，反之亦然。这个定理最牛逼的地方在于，它有一个非常直截了当的推论：</p><p>由男生主动求婚得到的M-optimal的稳定匹配中，每个男生都匹配上了他在所有的稳定匹配中可以匹配到的最好的女生（当然如果他在所有稳定匹配中都只能单身就……），每个女生则匹配上了她可以匹配到的最差的男生（或者始终保持单身……）；反之，由女生主动求婚得到的W-optimal的稳定匹配中，每个男生匹配上了最差的女生，每个女生则匹配上了最好的男生。</p><p>更加神奇的是，即使我们拿在手里的是两个不能比较的稳定匹配（也就是有些男生更喜欢μ，有些男生喜欢ν），那么我们可以让每个男生在μ和ν的两个配偶中选一个更好的，每个女生在μ和ν里的两个配偶中选一个更差的，然后：</p><ol><li>一定能得到新的匹配（也就是不会出现两个男生选同一个女生，或者两个女生选同一个男生，或者某男生选了某女生，该女生却没有选该男生）；</li><li>新的匹配也是稳定匹配；</li><li>新的匹配对每个男生来说比μ和ν都要好。</li></ol><p>数学上，这意味着所有的稳定匹配μ构成了一个代数，称为lattice，它有一些很好的性质，这里就不再展开。</p><p>最后给各位男生女生一句忠告，由于算法要求自始至终只有一方propose，所以主动不主动和算法流程的关系不大，但真正有关系的在于偏好啊，你不主动一点男神/女神一直把你放在unacceptable的人里面那你就一点机会都没有了啊！</p><hr><p>（2015.05.19 @ 微信公众号 @ 《第一讲：Marriage Market 婚姻市场》）</p></div><section id="comments" class="white-box"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript" target="_blank" rel="noopener">comments powered by Disqus.</a></noscript></div></section></article><script>document.getElementById("loading-bar").style.width="60%"</script></main><footer id="footer" class="clearfix"><div class="search"><form name="searchform" id="searchform" class="u-search-form"><input type="text" id="searchinput" class="u-search-input st-default-search-input" data-list-highlight="true" data-list-value-completion="true" placeholder="当你凝视深渊的时候，深渊也在凝视你。"> <button type="submit" id="u-search-btn-submit" class="u-search-btn-submit"><span class="icon icon-search"></span></button></form></div><div><a href="/about">sx349</a> &copy; 2008 - 2020 | <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></div><div>Theme <a href="https://github.com/artchen/hexo-theme-element" target="_blank">Element </a>by <a href="http://artifact.me/" target="_blank">Art Chen</a> | Powered by <a href="https://hexo.io/" target="_blank" rel="external noopener">Hexo</a></div></footer><script>document.getElementById("loading-bar").style.width="80%"</script><div class="overlay"></div></div><div class="site-sidebar"><div class="sidebar-switch clearfix" style="display:none"><a class="dark-btn active" data-toggle="toc"><span class="icon icon-list"></span> <span class="text">Index</span> </a><a class="dark-btn" data-toggle="bio"><span class="icon icon-person"></span> <span class="text">Bio</span></a></div><div class="site-toc" style="display:none"><div class="no-index">No Index</div></div><div class="site-bio show" style="display:block"><div class="about-me clearfix"><a class="avatar" href="/about"><img src="/img/avatar.png"></a><div class="info"><a class="name dark-btn" href="/about">sx349</a></div><div class="info"><span class="item desc">阅读 · 译介 · 创作</span></div></div><div class="social clearfix" style="margin:5px 0"><a href="https://sites.google.com/view/yejiaxu/" class="google" target="_blank" rel="external"><span class="icon icon-google"></span> </a><a href="https://www.zhihu.com/people/richard-xu-25" class="zhihu_1343420" target="_blank" rel="external"><span class="icon icon-zhihu_1343420"></span> </a><a href="https://pe-cn.github.io" class="calculator" target="_blank" rel="external"><span class="icon icon-calculator"></span> </a><a href="https://sx349.github.io/econ-notes" class="feed" target="_blank" rel="external"><span class="icon icon-feed"></span> </a><a href="#header" class="nav"><span class="icon icon-chevron-thin-up"></span> </a><a href="#footer" class="nav"><span class="icon icon-chevron-thin-down"></span></a></div><div class="article-tags-sidebar" style="margin:5px 0"><a href="/categories" style="font-size:13px;color:#a9a9a9;margin-bottom:5px">- 分类 -<br></a><a class="category-link" href="/categories/%E6%9D%82%E8%B0%88/">杂谈</a><a class="category-link" href="/categories/%E7%BB%8F%E6%B5%8E/">经济</a><a class="category-link" href="/categories/%E5%88%9B%E4%BD%9C/">创作</a><br><a href="/tags" style="font-size:13px;color:#a9a9a9;margin-bottom:5px">- 标签 -<br></a><a class="tag-link" href="/tags/%E4%B8%8A%E5%B8%9D/" rel="tag">上帝</a><a class="tag-link" href="/tags/%E4%B8%AD%E5%9B%BD/" rel="tag">中国</a><a class="tag-link" href="/tags/%E4%B9%8C%E9%B8%A6/" rel="tag">乌鸦</a><a class="tag-link" href="/tags/%E4%BA%BA%E6%8B%A9%E5%AE%9A%E5%BE%8B/" rel="tag">人择定律</a> <a class="tag-link" href="/tags">MORE</a><br><a href="/archive" style="font-size:13px;color:#a9a9a9;margin-bottom:5px">- 归档 -<br></a></div></div></div><script type="text/javascript">var GOOGLE_CUSTOM_SEARCH_API_KEY="",GOOGLE_CUSTOM_SEARCH_ENGINE_ID="",ALGOLIA_API_KEY="",ALGOLIA_APP_ID="",ALGOLIA_INDEX_NAME="",AZURE_SERVICE_NAME="",AZURE_INDEX_NAME="",AZURE_QUERY_KEY="",BAIDU_API_ID="",SEARCH_SERVICE="hexo"</script><script src="https://code.jquery.com/jquery-2.1.4.min.js"></script><script>window.jQuery||document.write('<script src="/js/jquery.js"><\/script>')</script><script src="/js/search.js"></script><script src="/js/app.js"></script><script type="text/javascript">var disqus_shortname="sx349",disqus_url="http://sx349.github.io/2015/05/19/ECON01/";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>document.getElementById("loading-bar").style.width="100%"</script></body></html>